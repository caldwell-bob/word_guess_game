<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>Word Guess Game</title>
</head>

<body>

  <div>
    <p id="directions-text">Press any key to get started!</p>
    <p id="userchoice-text"></p>
    <p id="computerchoice-text"></p>
    <p id="wins-text"></p>
    <p id="losses-text"></p>
    <p id="wordDisplay-text"></p>
    <p id="lettersGuessed-text"></p>
  </div>

  <script type="text/javascript">
    // Creates an array that lists out all of the options (Rock, Paper, or Scissors).
    var computerChoices = ["r", "p", "s"];
    var wordChoices = ["python", "ruby", "php", "perl", "javascript"];
    var lettersGuessed = "";

    // Creating variables to hold the number of wins, losses, and ties. They start at 0.
    var wins = 0;
    var losses = 0;
    var ties = 0;

    // Create variables that hold references to the places in the HTML where we want to display things.
    var directionsText = document.getElementById("directions-text");
    var userChoiceText = document.getElementById("userchoice-text");
    var computerChoiceText = document.getElementById("computerchoice-text");
    var winsText = document.getElementById("wins-text");
    var lossesText = document.getElementById("losses-text");
    var wordText = document.getElementById("wordDisplay-text");
    var lettersGuessedText = document.getElementById("lettersGuessed-text");

    // This function prints the letter place holder for the word to guess
    function placeholders(someWord){
      theLine = "_ "
      fullString = "";
      for (i=0; i < someWord.length; i++){
        fullString = fullString + theLine;
      }
      console.log(fullString);
      return fullString;
    }

    // This function checks to see if letter pressed is in the word to guess or not
    function isLetterInWord(theUserGuess, theWord) {
      var isIn = false;
      if (theWord.includes(theUserGuess)) {
        console.log(theUserGuess + " is in the word.")
        isIn = true;
      }
      return isIn;
    }

    function upDatecorrectGuesses(correctGuesses,word, guess) {
      // TODO account for extra spaces
      console.log("correctGuesses -> " + correctGuesses);
      for (var i =0; i <= correctGuesses.length; i ++) {
        console.log(word);
        if (word[i] === guess) {
          // correctGuesses[i]=guess;
          correctGuesses = correctGuesses.replace(correctGuesses[i],guess)
          console.log("Yes...I should replace " + correctGuesses[i] + " w the letter " + guess);
        }
      }
      console.log(correctGuesses);
      return correctGuesses;
    }

    var word = wordChoices[Math.floor(Math.random() * wordChoices.length)];
    var firstRun = true;

    // This function is run whenever the user presses a key.
    document.onkeyup = function (event) {

      // Determines which key was pressed.
      var userGuess = event.key;
      console.log("userGuess: " + userGuess);
      // Randomly chooses a word from the wordChoices array. 
     
      if (firstRun) {
        correctGuesses = placeholders(word);
        console.log("first run: " + correctGuesses.length);
        firstRun = false;
      }
      


      if (isLetterInWord(userGuess, word)) {
        correctGuesses = upDatecorrectGuesses(correctGuesses, word, userGuess);
      } else {
        lettersGuessed += userGuess;
      }

      // placeholders(word);

      // Hide the directions
      directionsText.textContent = "";

      // Display the user and computer guesses, and wins/losses/ties.
      userChoiceText.textContent = "Letter Guessed: " + userGuess;
      // computerChoiceText.textContent = "The computer chose: " + computerGuess;
      computerChoiceText.textContent = "The word to guess is : " + word;
      // winsText.textContent = "wins: " + wins;
      // lossesText.textContent = "losses: " + losses;
      wordText.textContent = "Guess the programming language: " + correctGuesses;
      lettersGuessedText.textContent = "letters guessed: " + lettersGuessed;

    // TODO call function --

    };
  </script>

</body>

</html>