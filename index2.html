<!DOCTYPE html>
<!-- saved from url=(0081)file:///Users/bobcaldwell/GitHub/HomeWork/assignment-3/word_guess_game/index.html -->
<html lang="en-us">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>Word Guess Game</title>
</head>

<body>

  <div>
    <p id="directions-text">Press any key to get started!</p>
    <p id="userchoice-text"></p>
    <p id="computerchoice-text"></p>
    <p id="wins-text"></p>
    <p id="losses-text"></p>
    <p id="wordDisplay-text"></p>
    <p id="lettersGuessed-text"></p>
    <p id="guessesRemaining-text"></p>
  </div>

  <script type="text/javascript">

    var wordGame = {
      word: "",
      userGuess: "",
      lettersGuessed: "",

      firstRun: true,
      wins: 0,
      losses: 0,
      
      wordChoices: ["python", "ruby", "php", "perl", "javascript"],

      directionsText: document.getElementById("directions-text"),
      userChoiceText: document.getElementById("userchoice-text"),
      winsText: document.getElementById("wins-text"),
      lossesText: document.getElementById("losses-text"),
      wordText: document.getElementById("wordDisplay-text"),
      lettersGuessedText: document.getElementById("lettersGuessed-text"),
      guessesRemainingText: document.getElementById("guessesRemaining-text"),

      initProgress: function (someWord) {
        theLine = "_"
        var fullString = [];
        for (i = 0; i < someWord.length; i++) {
          // fullString = fullString + theLine;
          fullString[i] = theLine;
          // console.log(fullString);
        }
        console.log(fullString);
        console.log(typeof (fullString));
        return fullString;
      },

      updateProgress: function (guessTracker, theWord, theGuess) {
        var fullString = [];
        fullString = guessTracker;
        for (var i = 0; i < theWord.length; i++) {
          if (theGuess == theWord[i]) {
            console.log('Its a match at position ' + i + ' !!!')
            fullString[i] = theGuess;
          }
        }
        console.log("inside updateProgress: results -> " + fullString);
        return fullString;
      },

      isLetterInWord: function (theUserGuess, theWord) {
        console.log("In isLetterInWord: theUserGuess: " + theUserGuess + " theWord: " + theWord);
        var isIn = false;
        if (theWord.includes(theUserGuess)) {
          isIn = true;
        }
        return isIn;
      },

      getWord: function () {
        word = wordGame.wordChoices[Math.floor(Math.random() * wordGame.wordChoices.length)];
        console.log(word);
        return word;
      },

      displayResults: function (userGuess, correctGuess) {
        wordGame.directionsText.textContent = " Press any key to get started!";
        wordGame.winsText.textContent = "wins: " + wordGame.wins;
        wordGame.lossesText.textContent = "losses: " + wordGame.losses;
        wordGame.userChoiceText.textContent = "Letter Guessed: " + wordGame.userGuess;
        // wordGame.computerChoiceText.textContent = "The word to guess is : " + word;
        wordGame.wordText.textContent = "Guess the programming language: " + correctGuesses;
        wordGame.lettersGuessedText.textContent = "Letters guessed: " + wordGame.lettersGuessed;
        wordGame.guessesRemainingText.textContent = "Guesses remaining: " + guessRemaining;

      },

      resetDisplay: function (userGuess, correctGuesses) {
        wordGame.lettersGuessed = "";
        // userGuess = "";
        wordGame.userGuess = "";
        wordGame.displayResults(userGuess, correctGuesses);
        wordGame.firstRun = true;
        // wordGame.directionsText.textContent = "Press A Key to Get Started!";
        guessRemaining = "";
        // userGuess = "";
       
      },

      playGame: function () {

        document.onkeyup = function (event) {

          // Determines which key was pressed.
          wordGame.userGuess = event.key;
          console.log(wordGame.userGuess);

          //TODO check for duplicate guesses

          if (wordGame.firstRun) {
            wordGame.word = wordGame.getWord();
            // guessRemaining = word.length;
            guessRemaining = 12;
            correctGuesses = wordGame.initProgress(wordGame.word);
            wordGame.firstRun = false;
            console.log("First run - correctGuess set to: " + correctGuesses);
          }

          guessRemaining -= 1;

          console.log("before calling isLetterInWord: word= " + wordGame.word);

          if (wordGame.isLetterInWord(wordGame.userGuess, wordGame.word)) {
            correctGuesses = wordGame.updateProgress(correctGuesses, wordGame.word, wordGame.userGuess);
            console.log("returning from isLetterInWord - correctGuesses: " + correctGuesses);
          } else {
            wordGame.lettersGuessed += wordGame.userGuess;
          }

          if (correctGuesses.includes("_")) {
            console.log("more guesses");
          } else {
            wordGame.wins++;
            correctGuesses = "";
            wordGame.resetDisplay();
            wordGame.displayResults(wordGame.userGuess);
            console.log("You won!!!");
            //  TODO need to call reset data set function...once created
          }

          if (guessRemaining === 0) {
            wordGame.losses++;
            correctGuesses = "";
            wordGame.resetDisplay(wordGame.userGuess, correctGuesses);
            wordGame.displayResults(wordGame.userGuess);
            console.log("Game Over!!!!");
          }

          wordGame.displayResults();

        }
      }

    }

    wordGame.playGame();
  </script>



</body>

</html>